"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9],{3375:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"guides/task-types/android-tasks/build-gradle","title":"build.gradle","description":"Modify build.gradle files","source":"@site/docs/guides/task-types/android-tasks/build-gradle.md","sourceDirName":"guides/task-types/android-tasks","slug":"/guides/task-types/android-tasks/build-gradle","permalink":"/integrate/docs/guides/task-types/android-tasks/build-gradle","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"build.gradle"},"sidebar":"tutorialSidebar","previous":{"title":"AndroidManifest.xml","permalink":"/integrate/docs/guides/task-types/android-tasks/android-manifest"},"next":{"title":"settings.gradle","permalink":"/integrate/docs/guides/task-types/android-tasks/settings-gradle"}}');var s=i(4848),l=i(8453);const r={sidebar_position:2,title:"build.gradle"},d="Build Gradle Task Configuration (build_gradle)",o={},c=[{value:"Task Properties",id:"task-properties",level:2},{value:"Action Properties",id:"action-properties",level:2},{value:"Common properties",id:"common-properties",level:3},{value:"Context reduction properties",id:"context-reduction-properties",level:3},{value:"Context modification properties",id:"context-modification-properties",level:3},{value:"Other properties",id:"other-properties",level:3},{value:"Block property",id:"block-property",level:3},{value:"Example",id:"example",level:2}];function a(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsxs)(t.h1,{id:"build-gradle-task-configuration-build_gradle",children:["Build Gradle Task Configuration (",(0,s.jsx)(t.code,{children:"build_gradle"}),")"]})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"Modify build.gradle files"})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"build_gradle"})," task is designed to facilitate modifications to the ",(0,s.jsx)(t.code,{children:"build.gradle"})," files in Android projects. It is commonly used to add\ndependencies, configure build settings, and perform other customizations within Android app modules. This task provides the flexibility to make\nchanges to different sections of the ",(0,s.jsx)(t.code,{children:"build.gradle"})," file."]}),"\n",(0,s.jsx)(t.h2,{id:"task-properties",children:"Task Properties"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Property"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"task"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'"build_gradle", required'}),(0,s.jsx)(t.td,{children:'Specifies the task type, which should be set to "build_gradle" for this task.'})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"name"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsxs)(t.td,{children:["An optional name for the task. If provided, the task state will be saved as a variable. Visit ",(0,s.jsx)(t.a,{href:"../../states",children:"Task and Action States"})," page to learn more."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"label"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{children:"An optional label or description for the task."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"when"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"object"}),(0,s.jsxs)(t.td,{children:["Visit ",(0,s.jsx)(t.a,{href:"../../when",children:"Conditional Tasks and Actions"})," page to learn how to execute task conditionally."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"location"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'"root" (default) or "app"'}),(0,s.jsxs)(t.td,{children:['Specifies the target location within the project structure, distinguishing between the root and app folders. It helps determine which build.gradle file to modify during the configuration process. "root" modifies ',(0,s.jsx)(t.code,{children:"android/build.gradle"}),' file and "app" modifies ',(0,s.jsx)(t.code,{children:"android/app/build.gradle"})," file"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"actions"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Array<",(0,s.jsx)(t.a,{href:"#action-properties",children:"Action"}),">, required"]}),(0,s.jsx)(t.td,{children:"An array of action items that define the modifications to be made in the file. Each action item contains the following fields:"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"action-properties",children:"Action Properties"}),"\n",(0,s.jsx)(t.h3,{id:"common-properties",children:"Common properties"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Property"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"name"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsxs)(t.td,{children:["An optional name for the task. If provided, the task state will be saved as a variable. Visit ",(0,s.jsx)(t.a,{href:"../../states",children:"Task and Action States"})," page to learn more."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"when"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"object"}),(0,s.jsxs)(t.td,{children:["Visit ",(0,s.jsx)(t.a,{href:"../../when",children:"Conditional Tasks and Actions"}),"  page to learn how to execute action conditionally."]})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"context-reduction-properties",children:"Context reduction properties"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Property"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"block"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsxs)(t.td,{children:["A string specifying the block path within the ",(0,s.jsx)(t.code,{children:"build.gradle"})," file where modifications should occur. Check ",(0,s.jsx)(t.a,{href:"#block-property",children:"Block"})," section below."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"before"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["string or ",(0,s.jsx)(t.code,{children:"{regex: string, flags: string}"})]}),(0,s.jsxs)(t.td,{children:["Text or code that is used to specify a point within the context where text should be inserted before. It can be a string or an object with a ",(0,s.jsx)(t.code,{children:"regex"})," and ",(0,s.jsx)(t.code,{children:"flags"})," field to perform a regex-based search."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"after"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["string or ",(0,s.jsx)(t.code,{children:"{regex: string, flags: string}"})]}),(0,s.jsxs)(t.td,{children:["Text or code that is used to specify a point within the context where text should be inserted after. It can be a string or an object with a ",(0,s.jsx)(t.code,{children:"regex"})," and ",(0,s.jsx)(t.code,{children:"flags"})," field to perform a regex-based search."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"search"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["string or ",(0,s.jsx)(t.code,{children:"{regex: string, flags: string}"})]}),(0,s.jsx)(t.td,{children:"A string or object (with regex and flags) that narrows the context to a specific text within the method or file."})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"context-modification-properties",children:"Context modification properties"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Property"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"prepend"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["string or ",(0,s.jsx)(t.code,{children:"{file: string}"})]}),(0,s.jsxs)(t.td,{children:["Text or code to prepend at the beginning of the specified context. It can be a string or an object with a ",(0,s.jsx)(t.code,{children:"file"})," field that points to a file containing the code to prepend."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"append"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["string or ",(0,s.jsx)(t.code,{children:"{file: string}"})]}),(0,s.jsxs)(t.td,{children:["Text or code to append at the end of the specified context. It can be a string or an object with a ",(0,s.jsx)(t.code,{children:"file"})," field that points to a file containing the code to append."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"replace"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["string or ",(0,s.jsx)(t.code,{children:"{file: string}"})]}),(0,s.jsxs)(t.td,{children:["Text or code to replace the entire specified context. It can be a string or an object with a ",(0,s.jsx)(t.code,{children:"file"})," field that points to a file containing the code to replace."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"script"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{children:"JS code script to evaluate. In script these functions are available to be called: `await prepend(content), await append(content), await replace(content)"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"other-properties",children:"Other properties"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Property"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"exact"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"boolean"}),(0,s.jsx)(t.td,{children:"A boolean flag that modifies the whitespace and new line management."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"strict"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"boolean"}),(0,s.jsxs)(t.td,{children:["Specifies the behavior of the ",(0,s.jsx)(t.code,{children:"before"})," and ",(0,s.jsx)(t.code,{children:"after"})," fields. If set to ",(0,s.jsx)(t.code,{children:"true"}),", the task will throw an error if the text in the ",(0,s.jsx)(t.code,{children:"before"})," or ",(0,s.jsx)(t.code,{children:"after"})," field is not found in the context, otherwise, it will ignore the field."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"ifNotPresent"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{children:"Indicates that the task should only be executed if the specified text or code is not present within the specified context."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"comment"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{children:"An optional comment to add before the inserted code or text. The comment is purely informational and does not affect the code's functionality."})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"block-property",children:"Block property"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"block"})," property in the ",(0,s.jsx)(t.code,{children:"build_gradle"})," task serves as a block path within the ",(0,s.jsx)(t.code,{children:"build.gradle"})," file. This path helps define the specific context\nwithin the file where modifications should be made. By specifying this block path, you can precisely target the portion of the ",(0,s.jsx)(t.code,{children:"build.gradle"})," file\nthat requires customization."]}),"\n",(0,s.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'task: build_gradle\nlabel: "Enabling multidex"\nlocation: "app",\nactions:\n  - block: "android.defaultConfig"\n    after: versionName\n    prepend: multiDexEnabled true\n'})}),"\n",(0,s.jsxs)(t.p,{children:["In this example, the ",(0,s.jsx)(t.code,{children:"build_gradle"})," task enables multidex in ",(0,s.jsx)(t.code,{children:"defaultConfig"})," block in the ",(0,s.jsx)(t.code,{children:"build.gradle"})," file. The ",(0,s.jsx)(t.code,{children:"block"}),' property is set to "\nandroid.defaultConfig", indicating the modification context.']})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>d});var n=i(6540);const s={},l=n.createContext(s);function r(e){const t=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(l.Provider,{value:t},e.children)}}}]);